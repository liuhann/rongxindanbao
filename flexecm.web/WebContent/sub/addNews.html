
<!-- 
<link type="text/css" rel="stylesheet" href="ueditor/themes/default/css/umeditor.min.css">
<script type="text/javascript" src="ueditor/lang/zh-cn/zh-cn.js"></script>
<script type="text/javascript" src="ueditor/umeditor.config.js"></script>
<script type="text/javascript" src="ueditor/umeditor.min.js"></script>
<script type="text/javascript" src="js/plupload.full.min.js"></script>

 -->
 
<link rel="stylesheet" href="../js/kindeditor/default/default.css" />
<script charset="utf-8" src="../js/kindeditor/kindeditor-min.js"></script>
<script charset="utf-8" src="../js/kindeditor/zh_CN.js"></script>
<script type="text/javascript">

var editor;
KindEditor.ready(function(K) {
	$(".add-news .empty").hide();
	editor = K.create('textarea[name="kind-editor"]', {
		resizeType : 1,
		allowPreviewEmoticons : false,
		allowImageUpload : false,
		items : [
			'fontname', 'fontsize', '|', 'forecolor', 'hilitecolor', 'bold', 'italic', 'underline',
			'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist',
			'insertunorderedlist', '|', 'emoticons', 'image', 'link']
	});
});
/*
	var _ue = null;
	$(function() {
		initUploader("btn-news-title-img", "/service/attachz/upload", function(up, s, r) {
				$("#news-title-img").attr("src", "/service/attachz/preview?id=" + r.response);
				$("#new-splash").val(r.response);
		});
		
		_ue = UM.getEditor('umcontainer');
	});
	

	*/
	
	function saveNews() {
		alert(editor.html());
		var c = formCheck(".add-news ");
		if (c.test()) {
			var news =  c.getRequest();
			news.html = encodeURI(editor.html());
			
			$.post("/service/fin/news/update", news, function() {
				listNews();
			});
		}
	}
</script>

<div class="form add-news">
		<div class="title">
			<h3>编辑新闻</h3> 
			<div class="ops">
				<a class="btn" onclick="saveNews()">保存</a> <a class="btn" onclick="listNews();">取消</a>
			</div>
		</div>
		<div class="fcg" style="margin-bottom: 1rem;">
				<label style="width: 4rem;">新闻标题</label> 
				<div class="fc">
					<input id="news-title" type="text" style="width: 30rem;" value="" data-checked="notnull" data-inval="不能为空">
				</div>
		</div>
		<div class="empty">
	    	正在初始化编辑器..
		</div>
	   <!-- 加载编辑器的容器 -->
   		<script id="umcontainer" type="text/plain" >
		</script>
		
		<textarea name="kind-editor" style="width:780px;height:400px;visibility:hidden;"></textarea>
		<div class="fcg" style="margin-bottom: 1rem;">
				<label style="width: 4rem;">来源</label> 
				<div class="fc">
					<input id="news-from" type="text" value="" >
				</div>
		</div>
</div>